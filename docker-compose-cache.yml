version: '3.8'
name: cache

services:
  redis-cache:
    container_name: redis-6.2
    image: redis:6.2-alpine
    restart: always
    ports:
      - '6379:6379'
    command: redis-server --save 20 1 --loglevel warning
    volumes:
      - redis-cache:/data
    deploy:
      resources:
        limits:
          cpus: '0.1'
          memory: 64M
        reservations:
          cpus: '0.05'
          memory: 32M
  memcached:
    container_name: memcached-1.6.18
    image: memcached:1.6.18
    restart: always
    ports:
      - '11211:11211'
    volumes:
      - memcached:/data
    deploy:
      resources:
        limits:
          cpus: '0.1'
          memory: 64M
        reservations:
          cpus: '0.05'
          memory: 32M
volumes:
  redis-cache:
    driver: local
  memcached:
    driver: local